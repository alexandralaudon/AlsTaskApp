.page-header
  %h1= "#{@project.name}: Manage Members"
%ol.breadcrumb
  %li= link_to 'Projects', projects_path
  %li= link_to @project.name, project_path(@project)
  %li.active= 'Memberships'
.row
  = render partial: "shared/errors", locals: {object: @membership}
.well
  .row
    = form_for [@project, @membership], html:{class: 'form-inline'} do |m|
      .form-horizontal
        = m.collection_select :user_id, User.all, :id, :full_name, {prompt: 'Please select a user...'}, {class:'form-control'}
        = m.collection_select :role, Membership::ROLE, :to_s, :to_s, {}, {class:'form-control'}
        = m.submit 'Add New Member', class:'btn btn-primary'
.row
  - @project.memberships.each do |membership|
    - if membership.user_id
      %p.row
        .col-md-2
          = link_to "#{membership.user.full_name}", user_path(membership.user_id)
        = form_for [@project, @membership] do |f|
          .col-md-2
            = f.collection_select :role, Membership::ROLE, :to_s, :to_s, {}, {class:'form-control'}
          .col-md-2.text-right
            = f.submit "Update", class:'btn btn-primary'
          .col-md-1
            = link_to project_membership_path(@project, membership[:id]), method: :delete, class: "btn btn-default" do
              %i.glyphicon.glyphicon-remove
